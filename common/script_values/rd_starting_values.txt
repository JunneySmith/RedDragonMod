
rd_culture_ai_weight_heavy_infantry = {
	value = 650
		if = {
	limit = {
					exists = situation:the_great_steppe
				any_character_situation = {
					this = situation:the_great_steppe
				}
	}
	add = -1000
	}
	if = { # Cultures with a special MaA of that type should avoid the base version of the unit
		limit = {
			government_has_flag = government_is_nomadic
		}
		add = -100000
	}
}

rd_culture_ai_weight_pikemen = {
	value = 0
}

rd_culture_ai_weight_light_cavalry = {
	value = 650
	if = {
	limit = {
					exists = situation:the_great_steppe
				any_character_situation = {
					this = situation:the_great_steppe
				}
	}
	add = 500
	}
	if = { # Cultures with a special MaA of that type should avoid the base version of the unit
		limit = {
			government_has_flag = government_is_nomadic
		}
		add = 100
	}

}

rd_culture_ai_weight_heavy_cavalry = {
	value = 650
			if = {
	limit = {
					exists = situation:the_great_steppe
				any_character_situation = {
					this = situation:the_great_steppe
				}
	}
	add = 600
	}
}



rd_governor_eff_modifier = {
	value = 0
	if = {
		limit = { # To stop errors in observe mode
government_has_flag  = government_has_rd_governor_officials
		}
	add = governor_efficiency
	}
	else ={
	add = 1
	}
}

obedience_value = {
	value = {
		value = 0
		desc = BASE
	}
	if = {
		limit = {
			exists = obedience_target 
		}
		if = {
			limit = { # Herders are ALWAYS obedient -- we don't even run the rest of calculations
				government_has_flag = government_is_herder
			}
			add = {
				value = obedience_threshold
				add = 1000
				desc = obedience_value_herder
			}
		}
		else = {
			# Have you been overruled to NOT be obedient?
			if = {
				limit = {
					has_variable = not_obedient_humiliation_var
					var:not_obedient_humiliation_var = obedience_target
				}
				add = { value = -850 desc = not_obedient_humiliation_var_tt }
			}
			else_if = {
				limit = {
					has_variable = not_obedient_declined_call
					var:not_obedient_declined_call = obedience_target
				}
				add = { value = -850 desc = request_influence_war_recipient_declined_opinion }
			}
			else_if = { # If you're not overruled to be disobedient, do you have an obedience reason?
				limit = {
					has_obedience_reason = obedience_target
				}
				add = { value = 1000 desc = opinion_obedient_reason }
			}
			
			add = { # Opinion
				desc = obedience_value_opinion
				value = "opinion(obedience_target)"
			}
			# Lifestyle Perks 
			if = {
				limit = {
					obedience_target = { has_perk = loyalty_and_respect_perk }
					is_spouse_of = obedience_target
				}
				add = { value = 25 desc = obedience_value_loyalty_and_respect } # If you change this value remember changing it in the perk loc key as well
			}
			if = {
				limit = {
					obedience_target = { has_perk = honored_to_serve_perk }
					is_kurultai_trigger = yes
				}
				add = { value = 25 desc = obedience_value_honored_to_serve } # If you change this value remember changing it in the perk loc key as well
			}
			# Family
			if = {
				limit = { is_primary_heir_of = obedience_target }
				add = { value = 250 desc = obedience_value_heir }
			}
			else_if = { # You are not the preferred heir
				limit = {
					is_male = yes
					is_child_of = obedience_target
					obedience_target = {
						OR = {
							has_realm_law = male_only_law
							has_realm_law = male_preference_law
							has_realm_law = equal_law
						}
					}
				}
				add = { value = -100 desc = obedience_value_heir_not_preferred }
			}
			else_if = {
				limit = { is_spouse_of = obedience_target }
				add = { value = 50 desc = obedience_value_spouse }
			}
			else_if = {
				limit = { is_child_of = obedience_target }
				add = { value = 50 desc = obedience_value_child }
			}
			else_if = {
				limit = { is_concubine_of = obedience_target }
				add = { value = 25 desc = obedience_value_concubine }
			}
			else_if = {
				limit = { is_close_family_of = obedience_target }
				add = { value = 25 desc = obedience_value_close_family }
			}
			else_if = {
				limit = { is_extended_family_of = obedience_target }
				add = { value = 10 desc = obedience_value_extended_family }
			}

			#Yurts
			if = {
				limit = {
					exists = obedience_target.domicile
				}
				if = {
					limit = {
						OR = {
							has_council_position = councillor_kurultai_1
							has_council_position = councillor_kurultai_2
							has_council_position = councillor_kurultai_3
							has_council_position = councillor_kurultai_4
						}
					}
					obedience_target.domicile = {
						switch = {
							trigger = has_domicile_parameter
							nomad_yurt_kurultai_obedience_per_piety_lvl_1 = {
								add = { value = prev.obedience_target.piety_level desc = kurultai_mystical_yurt_01_domicile_building }
							}
							nomad_yurt_kurultai_obedience_per_piety_lvl_2 = {
								add = { value = prev.obedience_target.piety_level multiply = 2 desc = kurultai_mystical_yurt_01_domicile_building }
							}
						}
						switch = {
							trigger = has_domicile_parameter
							nomad_yurt_kurultai_more_loyal_lvl_1 = {
								add = { value = 6 desc = kurultai_yurt_01 }
							}
							nomad_yurt_kurultai_more_loyal_lvl_2 = {
								add = { value = 12 desc = kurultai_yurt_01 }
							}
							nomad_yurt_kurultai_more_loyal_lvl_3 = {
								add = { value = 18 desc = kurultai_yurt_01 }
							}
						}
					}
				}
				else_if = {
					limit = {
						is_courtier_of = obedience_target
					}
					obedience_target.domicile = {
						switch = {
							trigger = has_domicile_parameter
							loyal_soldiers_yurt_more_obedient_lvl_1 = {
								add = { value = 4 desc = loyal_soldiers_yurt_06_domicile_building }
							}
							loyal_soldiers_yurt_more_obedient_lvl_2 = {
								add = { value = 8 desc = loyal_soldiers_yurt_06_domicile_building }
							}
							loyal_soldiers_yurt_more_obedient_lvl_3 = {
								add = { value = 16 desc = loyal_soldiers_yurt_06_domicile_building }
							}
						}
					}
				}
				if = {
					limit = {
						obedience_target = {
							has_character_flag = established_paiza_system
						}
						any_equipped_character_artifact = {
							root = { can_benefit_from_artifact = prev }
							exists = var:paiza_patron
							var:paiza_patron = {
								this = obedience_target
								is_gurkhan = yes
							}
						}
					}
					obedience_target.domicile = {
						switch = {
							trigger = has_domicile_parameter
							nomad_yurt_paiza_obedience_bonus_lvl_1 = {
								add = { value = 8 desc = domicile_building_parameter_nomad_yurt_paiza_obedience_bonus_lvl_1 }
							}
							nomad_yurt_paiza_obedience_bonus_lvl_2 = {
								add = { value = 16 desc = domicile_building_parameter_nomad_yurt_paiza_obedience_bonus_lvl_2 }
							}
							nomad_yurt_paiza_obedience_bonus_lvl_3 = {
								add = { value = 24 desc = domicile_building_parameter_nomad_yurt_paiza_obedience_bonus_lvl_3 }
							}
						}
					}
				}
			}
			
			# Relationships
			if = {
				limit = { has_relation_blood_brother = obedience_target }
				add = { value = 1250 desc = obedience_value_blood_brother }
			}
			else_if = {
				limit = { has_relation_best_friend = obedience_target }
				add = { value = 1000 desc = obedience_value_best_friend }
			}
			else_if = {
				limit = { has_relation_friend = obedience_target }
				add = { value = 100 desc = obedience_value_friend }
			}
			else_if = {
				limit = { has_relation_ward = obedience_target }
				add = { value = 50 desc = obedience_value_ward }
			}
			else_if = {
				limit = { has_relation_guardian = obedience_target }
				add = { value = 50 desc = obedience_value_guardian }
			}
			else_if = {
				limit = { has_relation_rival = obedience_target }
				add = { value = -100 desc = obedience_value_rival }
			}
			else_if = {
				limit = { has_relation_nemesis = obedience_target }
				add = { value = -1000 desc = obedience_value_nemesis }
			}
			else_if = {
				limit = {
					government_has_flag = government_is_nomadic
					NOR = {
						has_relation_lover = obedience_target
						has_relation_potential_lover = obedience_target
						has_relation_crush = obedience_target
						has_relation_potential_friend = obedience_target
					}
				}
				add = { value = -50 desc = obedience_value_not_good_relationship }
			}
			else_if = {
				limit = {
					NOT = { government_has_flag = government_is_nomadic }
					NOR = {
						has_relation_lover = obedience_target
						has_relation_potential_lover = obedience_target
						has_relation_crush = obedience_target
						has_relation_potential_friend = obedience_target
					}
				}
				add = { value = -20 desc = obedience_value_not_good_relationship }
			}
			# Employment
			if = { # Is this person in your kurultai?
				limit = {
					government_has_flag = government_is_nomadic
					this != obedience_target.primary_spouse
					is_councillor_of = obedience_target
				}
				add = { value = 25 desc = obedience_value_councillor }
			}
			else_if = { # They're not in your Kurultai
				limit = {
					government_has_flag = government_is_nomadic
					NOT = {
						is_councillor_of = obedience_target
					}
					can_be_any_kurultai_trigger = { COURT_OWNER = obedience_target }
				}
				add = { value = -25 desc = obedience_value_no_kurultai }
			}
			# Employment
			if = { # Is this person in your kurultai?
				limit = {
					NOT = {government_has_flag = government_is_nomadic }
					this != obedience_target.primary_spouse
					is_councillor_of = obedience_target
				}
				add = { value = 25 desc = rd_obedience_value_councillor }
			}
			else_if = { # They're not in your Kurultai
				limit = {
					NOT = {government_has_flag = government_is_nomadic }
					NOT = {
						is_councillor_of = obedience_target
					}
					can_be_any_kurultai_trigger = { COURT_OWNER = obedience_target }
				}
				add = { value = -15 desc = rd_obedience_value_councillor }
			}
			if = { # Is this your Yeke Jarquchi?
				limit = {
					obedience_target.court_position:yeke_jarquchi_court_position ?= this
				}
				add = { value = 50 desc = obedience_value_yeke_jarquchi }
			}
			else_if = { # Is this your Court Astrologer?
				limit = {
					obedience_target.court_position:court_astrologer_court_position ?= this
				}
				add = { value = 25 desc = obedience_value_court_astrologer }
			}
			else_if = { # Or are they employed by you in any other way?
				limit = {
					is_courtier_of = obedience_target
					has_any_court_position = yes
				}
				add = { value = 15 desc = obedience_value_court_position }
			}
			else_if = { # You don't employ them
				limit = {
					is_courtier_of = obedience_target
					has_any_court_position = no
				}
				add = { value = -15 desc = obedience_value_no_court_position }
			}
			
			# Legitimacy
			if = {
				limit = {
					
					obedience_target = {
						has_nomadic_legitimacy = yes
						legitimacy_level >= 3
					}
				}
				add = { value = 25 desc = obedience_value_high_legitimacy }
			}
			else_if = {
				limit = {
					government_has_flag = government_is_nomadic
									obedience_target = {
						has_nomadic_legitimacy = yes
						}
				}
				add = { value = -15 desc = obedience_value_low_legitimacy }
			}
			if = {
				limit = {
					#NOT = { government_has_flag = government_is_nomadic }
					obedience_target = {
						has_nomadic_legitimacy = no
						legitimacy_level >= 3
					}
				}
				add = { value = 25 desc = obedience_value_high_legitimacy }
			}
			else_if  = {
				limit = {
					NOT = { government_has_flag = government_is_nomadic }
									obedience_target = {
						has_nomadic_legitimacy = no
						}
					}
				add = { value = -15 desc = obedience_value_low_legitimacy }
			}
			# Traits
			switch = {
				trigger = has_trait
				loyal = { add = { value = 25 desc = personality_traitdesc.trait.loyal } }
				craven = { add = { value = 25 desc = personality_traitdesc.trait.craven } }
				content = { add = { value = 10 desc = personality_traitdesc.trait.content } }
				humble = { add = { value = 10 desc = personality_traitdesc.trait.humble } }
				gregarious = { add = { value = 5 desc = personality_traitdesc.trait.gregarious } }
				diligent = { add = { value = 5 desc = personality_traitdesc.trait.diligent } }
				disloyal = { add = { value = -25 desc = personality_traitdesc.trait.disloyal } }
				deceitful = { add = { value = -25 desc = personality_traitdesc.trait.deceitful } }
				stubborn = { add = { value = -25 desc = personality_traitdesc.trait.stubborn } }
				arrogant = { add = { value = -20 desc = personality_traitdesc.trait.arrogant } }
				paranoid = { add = { value = -10 desc = personality_traitdesc.trait.paranoid } }
				ambitious = { add = { value = -10 desc = personality_traitdesc.trait.ambitious } }
				brave = { add = { value = -5 desc = personality_traitdesc.trait.brave } }
			}
			
			if = {
				limit = {
					obedience_target = { has_trait = greatest_of_khans }
				}
				add = { value = 50 desc = obedience_greatest_of_khans }
			}
			else_if = {
				limit = {
					obedience_target = { has_trait = conqueror }
				}
				add = { value = 35 desc = obedience_conqueror_trait }
			}
			else_if = {
				limit = {
					obedience_target = { has_character_modifier = the_great_khan_modifier }
				}
				add = { value = 20 desc = obedience_greatest_of_khans_descendant }
			}

			# Other
			if = { # Children
				limit = { is_adult = no }
				if = {
					limit = { is_courtier_of = obedience_target }
					add = { value = 125 desc = obedience_value_child_courtier }
				}
				else = {
					add = { value = 100 desc = obedience_value_child_vassal }
					switch = {
						trigger = has_trait
						rowdy = { add = { value = -25 desc = personality_traitdesc.trait.rowdy } }
						bossy = { add = { value = -25 desc = personality_traitdesc.trait.bossy } }
						charming = { add = { value = 25 desc = personality_traitdesc.trait.charming } }
						curious = { add = { value = -25 desc = personality_traitdesc.trait.curious } }
						pensive = { add = { value = -25 desc = personality_traitdesc.trait.pensive } }
					}
				}
			}
			if = { # Low Prowess
				limit = {	
					obedience_target.prowess <= this.prowess
				}
				add = { value = -15 desc = obedience_value_low_prowess }
			}
			if = { # Low mil
				limit = {
					NOT = { government_has_flag = government_is_nomadic }
					obedience_target.martial <= this.martial
				}
				add = { value = -5 desc = obedience_value_rd_low_mil }
			}
			else_if = {
				limit = {
					NOT = { government_has_flag = government_is_nomadic }
				}
				add = { value = 20 desc = obedience_value_rd_high_mil }
			}
			if = { # Low Dread
				limit = {
					obedience_target.dread < this.dread
				}
				add = { value = -10 desc = obedience_value_low_dread }
			}
			else_if = { # High Dread
				limit = {
					obedience_target.dread > 10
					obedience_target.dread > this.dread 
				}
				add = { 
					value = obedience_target.dread 
					multiply = 0.5
					desc = obedience_value_high_dread 
				}
			} 
			else_if = {
				limit = {
					obedience_target.dread < 10
				}
				add = { value = -5 desc = obedience_value_insignificant_dread }
			}

			if = { # Truce
				limit = {
					has_truce = obedience_target
				}
				add = { value = 50 desc = obedience_value_truce }
			}

			if = { # Larger Herd
				limit = {
					exists = domicile
					domicile.herd >= 100
					domicile.herd > obedience_target.domicile.herd
				}
				add = { value = -500 desc = obedience_value_herd_size }
			}

			if = { # Larger army
				limit = {
					current_military_strength >= 100
					current_military_strength > obedience_target.current_military_strength
				}
				add = { value = -500 desc = obedience_value_military_might }
			}

			#CULTRADS
			if = {
				limit = {
					culture = {
						has_cultural_parameter = nomadic_loyal_soldiers_obedience
					}
				}
				add = { value = 25 desc = obedience_value_loyal_soldiers }
			}
		}
	}
}
